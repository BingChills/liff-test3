[Developers](https://developers.line.biz/en/)
[About](https://developers.line.biz/en/about/)
[News](https://developers.line.biz/en/news/)
[Products](https://developers.line.biz/en/services/)
[Documentation](https://developers.line.biz/en/docs/)
[FAQ](https://developers.line.biz/en/faq/)
[Glossary](https://developers.line.biz/en/glossary/)
1. [Home](https://developers.line.biz/en/)
2. [Documentation](https://developers.line.biz/en/docs/)
3. [LINE Front-end Framework (LIFF)](https://developers.line.biz/en/docs/liff/)
4. Developing a LIFF app
[Home](https://developers.line.biz/en/)
[Documentation](https://developers.line.biz/en/docs/)
[LINE Front-end Framework (LIFF)](https://developers.line.biz/en/docs/liff/)
- API references
- Development guidelines
-  Quickstart
      Overview

      Creating a channel

      Trying the LIFF starter app

      Building a LIFF app development environment with Create LIFF App

      Developing a LIFF app

      Adding a LIFF app to your channel

      Opening a LIFF app
      [Minimizing LIFF browser](https://developers.line.biz/en/docs/liff/minimizing-liff-browser/)
- [Overview](https://developers.line.biz/en/docs/liff/overview/)
- [Creating a channel](https://developers.line.biz/en/docs/liff/getting-started/)
- [Trying the LIFF starter app](https://developers.line.biz/en/docs/liff/trying-liff-app/)
- [Building a LIFF app development environment with Create LIFF App](https://developers.line.biz/en/docs/liff/cli-tool-create-liff-app/)
- [Developing a LIFF app](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
- [Adding a LIFF app to your channel](https://developers.line.biz/en/docs/liff/registering-liff-apps/)
- [Opening a LIFF app](https://developers.line.biz/en/docs/liff/opening-liff-app/)
- [Minimizing LIFF browser](https://developers.line.biz/en/docs/liff/minimizing-liff-browser/)
- Guide
- LIFF plugin
- Tools
- Resources
API references
Development guidelines
Quickstart
- [Overview](https://developers.line.biz/en/docs/liff/overview/)
- [Creating a channel](https://developers.line.biz/en/docs/liff/getting-started/)
- [Trying the LIFF starter app](https://developers.line.biz/en/docs/liff/trying-liff-app/)
- [Building a LIFF app development environment with Create LIFF App](https://developers.line.biz/en/docs/liff/cli-tool-create-liff-app/)
- [Developing a LIFF app](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
- [Adding a LIFF app to your channel](https://developers.line.biz/en/docs/liff/registering-liff-apps/)
- [Opening a LIFF app](https://developers.line.biz/en/docs/liff/opening-liff-app/)
- [Minimizing LIFF browser](https://developers.line.biz/en/docs/liff/minimizing-liff-browser/)
[Overview](https://developers.line.biz/en/docs/liff/overview/)
[Creating a channel](https://developers.line.biz/en/docs/liff/getting-started/)
[Trying the LIFF starter app](https://developers.line.biz/en/docs/liff/trying-liff-app/)
[Building a LIFF app development environment with Create LIFF App](https://developers.line.biz/en/docs/liff/cli-tool-create-liff-app/)
[Developing a LIFF app](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Adding a LIFF app to your channel](https://developers.line.biz/en/docs/liff/registering-liff-apps/)
[Opening a LIFF app](https://developers.line.biz/en/docs/liff/opening-liff-app/)
[Minimizing LIFF browser](https://developers.line.biz/en/docs/liff/minimizing-liff-browser/)
Guide
LIFF plugin
Tools
Resources
- API references
- Development guidelines
-  Quickstart
      Overview

      Creating a channel

      Trying the LIFF starter app

      Building a LIFF app development environment with Create LIFF App

      Developing a LIFF app

      Adding a LIFF app to your channel

      Opening a LIFF app
      [Minimizing LIFF browser](https://developers.line.biz/en/docs/liff/minimizing-liff-browser/)
- [Overview](https://developers.line.biz/en/docs/liff/overview/)
- [Creating a channel](https://developers.line.biz/en/docs/liff/getting-started/)
- [Trying the LIFF starter app](https://developers.line.biz/en/docs/liff/trying-liff-app/)
- [Building a LIFF app development environment with Create LIFF App](https://developers.line.biz/en/docs/liff/cli-tool-create-liff-app/)
- [Developing a LIFF app](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
- [Adding a LIFF app to your channel](https://developers.line.biz/en/docs/liff/registering-liff-apps/)

- [Opening a LIFF app](https://developers.line.biz/en/docs/liff/opening-liff-app/)
- [Minimizing LIFF browser](https://developers.line.biz/en/docs/liff/minimizing-liff-browser/)
- Guide
- LIFF plugin
- Tools
- Resources
API references
Development guidelines
Quickstart
- [Overview](https://developers.line.biz/en/docs/liff/overview/)
- [Creating a channel](https://developers.line.biz/en/docs/liff/getting-started/)
- [Trying the LIFF starter app](https://developers.line.biz/en/docs/liff/trying-liff-app/)
- [Building a LIFF app development environment with Create LIFF App](https://developers.line.biz/en/docs/liff/cli-tool-create-liff-app/)
- [Developing a LIFF app](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
- [Adding a LIFF app to your channel](https://developers.line.biz/en/docs/liff/registering-liff-apps/)
- [Opening a LIFF app](https://developers.line.biz/en/docs/liff/opening-liff-app/)
- [Minimizing LIFF browser](https://developers.line.biz/en/docs/liff/minimizing-liff-browser/)
[Overview](https://developers.line.biz/en/docs/liff/overview/)
[Creating a channel](https://developers.line.biz/en/docs/liff/getting-started/)
[Trying the LIFF starter app](https://developers.line.biz/en/docs/liff/trying-liff-app/)
[Building a LIFF app development environment with Create LIFF App](https://developers.line.biz/en/docs/liff/cli-tool-create-liff-app/)
[Developing a LIFF app](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Adding a LIFF app to your channel](https://developers.line.biz/en/docs/liff/registering-liff-apps/)
[Opening a LIFF app](https://developers.line.biz/en/docs/liff/opening-liff-app/)
[Minimizing LIFF browser](https://developers.line.biz/en/docs/liff/minimizing-liff-browser/)
Guide
LIFF plugin
Tools
Resources

#
A LIFF app is a web app based on HTML and JavaScript. Here, we'll explain the process of developing a LIFF app and processes specific to building LIFF apps.
- Setting the title of the LIFF app
- Integrating the LIFF SDK with the LIFF app Specify the CDN path Use the npm package
- Specify the CDN path
- Use the npm package
- Initializing the LIFF app Important points to consider when initializing the LIFF app To use LINE Login in an external browser
- Important points to consider when initializing the LIFF app
- To use LINE Login in an external browser
- Calling the LIFF API Getting the environment in which the LIFF app is running Performing a login process Opening a URL Opening the 2D code reader Getting the screen type from which the LIFF app was launched Get user profile Getting the friendship status between the user and the LINE Official Account Getting the permanent link of any page in the LIFF app Sending messages to the current chat room Sending messages to a user's friend (share target picker) Closing the LIFF app
- Getting the environment in which the LIFF app is running
- Performing a login process
- Opening a URL
- Opening the 2D code reader
- Getting the screen type from which the LIFF app was launched
- Get user profile
- Getting the friendship status between the user and the LINE Official Account
- Getting the permanent link of any page in the LIFF app
- Sending messages to the current chat room
- Sending messages to a user's friend (share target picker)
- Closing the LIFF app
- Setting the OGP tags
- When opening an external site that isn't a LIFF app
- Next steps
Setting the title of the LIFF app
Integrating the LIFF SDK with the LIFF app
- Specify the CDN path
- Use the npm package
Specify the CDN path
Use the npm package
Initializing the LIFF app
- Important points to consider when initializing the LIFF app
- To use LINE Login in an external browser
Important points to consider when initializing the LIFF app
To use LINE Login in an external browser
Calling the LIFF API
- Getting the environment in which the LIFF app is running
- Performing a login process
- Opening a URL
- Opening the 2D code reader
- Getting the screen type from which the LIFF app was launched
- Get user profile
- Getting the friendship status between the user and the LINE Official Account
- Getting the permanent link of any page in the LIFF app
- Sending messages to the current chat room
- Sending messages to a user's friend (share target picker)
- Closing the LIFF app
Getting the environment in which the LIFF app is running
Performing a login process
Opening a URL
Opening the 2D code reader
Getting the screen type from which the LIFF app was launched
Get user profile
Getting the friendship status between the user and the LINE Official Account
Getting the permanent link of any page in the LIFF app
Sending messages to the current chat room
Sending messages to a user's friend (share target picker)
Closing the LIFF app
Setting the OGP tags
When opening an external site that isn't a LIFF app
Next steps

#
The title of the LIFF app will appear in the title bar of the LIFF app. Specify the name of the LIFF app in the <title> element of the HTML source of the web app.

```
<title>
```


```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The title</title>
```


```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The title</title>
```

#
You can embed the LIFF SDK in the LIFF app using these methods:
- Specify the CDN path
- Use the npm package
Specify the CDN path
Use the npm package

#
To use the functions of the LIFF SDK, specify the URL of the LIFF SDK in the src attribute of the <script> element of the LIFF app's HTML source. We prepare these two types of CDN paths for LIFF. Specify the CDN path that suits your purpose.

```
src
```


```
<script>
```

Developers using the CDN fixed path will need to decide when to update their LIFF app. You can evaluate each update we provide by frequently checking the [Release notes](https://developers.line.biz/en/docs/liff/release-notes/) in the LIFF documentation and decide if the update is right for you.
Example of specifying a CDN fixed path:

```
<script charset="utf-8" src="https://static.line-scdn.net/liff/edge/versions/2.22.3/sdk.js"></script>
```


```
<script charset="utf-8" src="https://static.line-scdn.net/liff/edge/versions/2.22.3/sdk.js"></script>
```

The LIFF SDK is written in UTF-8, so if your HTML source uses a character encoding different than UTF-8, make sure you also specify charset="utf-8".

```
charset="utf-8"
```

#
The LIFF SDK is available as an npm package. You can use npm to install the LIFF SDK.
It is the developer's responsibility to use an appropriate SDK version. To keep your SDK version up to date, check the LIFF release notes on a regular basis, and update your local SDK frequently. For more information about LIFF's versioning policy, see [LIFF SDK (sdk.js) update policy](https://developers.line.biz/en/docs/liff/versioning-policy/).
Node.js polyfill has been removed from webpack v5.  (opens new window) Accordingly, if you use the npm version of LIFF v2.16.0 or earlier in a project using webpack v5, you will get a build error. For more information, see the news from October 26, 2021, [LIFF v2.16.1 released](https://developers.line.biz/en/news/2021/10/26/release-liff-2-16-1/).
To install the LIFF SDK via npm and import it into your app, follow these steps:
1. Run this command in your terminal to install the LIFF SDK via npm: $ npm install --save @line/liff
Alternatively, you can run this command in your terminal to install the LIFF SDK via Yarn: $ yarn add @line/liff

2. Import the SDK into your app Include the following code in your JavaScript or TypeScript file: import liff from "@line/liff";

liff.init({
  liffId: "1234567890-AbcdEfgh", // Use own liffId
});
Type definitions for TypeScript are already included in the @line/liff package.
            Don't declare or modify window.liff
          For backward compatibility, don't declare or modify the global LIFF instance window.liff. Declaring or modifying window.liff may cause malfunctioning of the LINE app.
Run this command in your terminal to install the LIFF SDK via npm:

```
$ npm install --save @line/liff
```


```
$ npm install --save @line/liff
```

Alternatively, you can run this command in your terminal to install the LIFF SDK via Yarn:

```
$ yarn add @line/liff
```


```
$ yarn add @line/liff
```

Import the SDK into your app
Include the following code in your JavaScript or TypeScript file:

```
import liff from "@line/liff";

liff.init({
  liffId: "1234567890-AbcdEfgh", // Use own liffId
});
```


```
import liff from "@line/liff";

liff.init({
  liffId: "1234567890-AbcdEfgh", // Use own liffId
});
```

Type definitions for TypeScript are already included in the @line/liff package.

```
@line/liff
```

For backward compatibility, don't declare or modify the global LIFF instance window.liff. Declaring or modifying window.liff may cause malfunctioning of the LINE app.

```
window.liff
```

Related page: [https://www.npmjs.com/package/@line/liff  (opens new window)](https://www.npmjs.com/package/@line/liff)
Using the pluggable SDK reduces the LIFF SDK file size. For more information, see [Pluggable SDK](https://developers.line.biz/en/docs/liff/pluggable-sdk/).

#

The [liff.init()](https://developers.line.biz/en/reference/liff/) method initializes the LIFF app and enables you to call the other methods of the LIFF SDK from the LIFF app.

```
liff.init()
```

LIFF apps must be initialized each time a page is opened. Even if the transition is within the same LIFF app, you should execute the liff.init() method when you open a new page.

```
liff.init()
```

If you use LIFF features without properly initializing the LIFF app, we don't guarantee that the features will work.
The process from when the user accesses the [LIFF URL](https://developers.line.biz/en/glossary/) on the LINE app to when the LIFF app is initialized is as follows:
For more information, see [LIFF Behaviors from accessing the LIFF URL to opening the LIFF app](https://developers.line.biz/en/docs/liff/opening-liff-app/).
When you access a LIFF URL or perform a transition between LIFF apps, the URL may be given query parameters that begin with liff.*.

```
liff.*
```

e.g.
- liff.state (indicates additional information specified in LIFF URL)
- liff.referrer (indicates where the referrer came from when transitioning between LIFF apps. For more information, see [Get URL from before LIFF-to-LIFF transition](https://developers.line.biz/en/docs/liff/opening-liff-app/))

```
liff.state
```


```
liff.referrer
```

[Get URL from before LIFF-to-LIFF transition](https://developers.line.biz/en/docs/liff/opening-liff-app/)
The above query parameters are given by the SDK so that LIFF apps can function properly. When you independently alter the above query parameters, proper opening of the LIFF app and a transition between LIFF apps may not be guaranteed. Implement your app so that the liff.* query parameter is altered after liff.init() is resolved.

```
liff.*
```


```
liff.init()
```

This property or methods are available even before the liff.init() method is executed. You can get the environment in which the LIFF app is running before initializing the LIFF app, or close the LIFF app when the LIFF app initialization fails.

```
liff.init()
```

- [liff.ready](https://developers.line.biz/en/reference/liff/)
- [liff.getOS()](https://developers.line.biz/en/reference/liff/)
- [liff.getAppLanguage()](https://developers.line.biz/en/reference/liff/)
- [liff.getLanguage()](https://developers.line.biz/en/reference/liff/) (deprecated)
- [liff.getVersion()](https://developers.line.biz/en/reference/liff/)
- [liff.getLineVersion()](https://developers.line.biz/en/reference/liff/)
- [liff.isInClient()](https://developers.line.biz/en/reference/liff/)
- [liff.closeWindow()](https://developers.line.biz/en/reference/liff/)
- [liff.use()](https://developers.line.biz/en/reference/liff/)
- [liff.i18n.setLang()](https://developers.line.biz/en/reference/liff/)
[liff.ready](https://developers.line.biz/en/reference/liff/)
[liff.getOS()](https://developers.line.biz/en/reference/liff/)
[liff.getAppLanguage()](https://developers.line.biz/en/reference/liff/)
[liff.getLanguage()](https://developers.line.biz/en/reference/liff/)
[liff.getVersion()](https://developers.line.biz/en/reference/liff/)
[liff.getLineVersion()](https://developers.line.biz/en/reference/liff/)
[liff.isInClient()](https://developers.line.biz/en/reference/liff/)
[liff.closeWindow()](https://developers.line.biz/en/reference/liff/)
[liff.use()](https://developers.line.biz/en/reference/liff/)
[liff.i18n.setLang()](https://developers.line.biz/en/reference/liff/)
To use the liff.closeWindow() method before the initialization of the LIFF app by liff.init() has finished, your LIFF SDK version must be v2.4.0 or later.

```
liff.closeWindow()
```


```
liff.init()
```

By specifying true in the withLoginOnExternalBrowser property of the config object of the liff.init() method, the liff.login() method can be executed automatically when the LIFF app is initialized in external browsers.

```
true
```


```
withLoginOnExternalBrowser
```


```
config
```


```
liff.init()
```


```
liff.login()
```


```
liff
  .init({
    liffId: "1234567890-AbcdEfgh", // Use own liffId
    withLoginOnExternalBrowser: true, // Enable automatic login process
  })
  .then(() => {
    // Start to use liff's api
  });
```


```
liff
  .init({
    liffId: "1234567890-AbcdEfgh", // Use own liffId
    withLoginOnExternalBrowser: true, // Enable automatic login process
  })
  .then(() => {
    // Start to use liff's api
  });
```

#
liffId needs a specified LIFF app ID, which you can get by adding the LIFF app to your channel. For more information, see [Adding a LIFF app to your channel](https://developers.line.biz/en/docs/liff/registering-liff-apps/).

```
liffId
```


```
liff
  .init({
    liffId: "1234567890-AbcdEfgh", // Use own liffId
  })
  .then(() => {
    // start to use LIFF's api
  })
  .catch((err) => {
    console.log(err);
  });
```


```
liff
  .init({
    liffId: "1234567890-AbcdEfgh", // Use own liffId
  })
  .then(() => {
    // start to use LIFF's api
  })
  .catch((err) => {
    console.log(err);
  });
```

Also, with liff.ready, you can get the Promise object that resolves when you run liff.init() for the first time after starting the LIFF app.

```
liff.ready
```


```
Promise
```


```
liff.init()
```

For more information, see the liff.init() and [liff.ready](https://developers.line.biz/en/reference/liff/) sections in the LIFF v2 API reference.

#
The following are important points to consider when initializing your LIFF app. Read and understand these points before you start developing your LIFF app.
- Execute liff.init() at the endpoint URL or at a lower level
- Execute liff.init() once for both the primary redirect URL and once at the secondary redirect URL
- Process URL changes after liff.init() completes
- Use caution when handling the primary redirect URL
Execute liff.init() at the endpoint URL or at a lower level

```
liff.init()
```

Execute liff.init() once for both the primary redirect URL and once at the secondary redirect URL

```
liff.init()
```

Process URL changes after liff.init() completes

```
liff.init()
```

Use caution when handling the primary redirect URL

#### # Execute liff.init() at the endpoint URL or at a lower level

#
```
liff.init()
```

The liff.init() method will only work on URLs that are exactly the same as the endpoint URL, or on URLs that are at a lower level than the endpoint URL. If the LIFF app transitions to a URL other than these, the liff.init() method isn't guaranteed to work.

```
liff.init()
```


```
liff.init()
```

The following example shows whether the behavior is guaranteed for the URL that executes the liff.init() method when the endpoint URL is https://example.com/path1/.

```
liff.init()
```


```
https://example.com/path1/
```


```
liff.init()
```


```
https://example.com/
```


```
https://example.com/path1/
```


```
https://example.com/path1/language/
```


```
https://example.com/path2/
```


#### # Execute liff.init() once for both the primary redirect URL and once at the secondary redirect URL

#
```
liff.init()
```

The liff.init() method performs initialization processing based on information such as liff.state and access_token=xxx given to the primary redirect URL. If your endpoint URL includes a query parameter or path, to properly initialize the LIFF app, execute the liff.init() method once for both the primary redirect URL and the secondary redirect URL. For more information, see [Behaviors from accessing the LIFF URL to opening the LIFF app](https://developers.line.biz/en/docs/liff/opening-liff-app/).

```
liff.init()
```


```
liff.state
```


```
access_token=xxx
```


```
liff.init()
```


#### # Process URL changes after liff.init() completes

#
```
liff.init()
```

Don't change the URL during server or front-end processing before the Promise object returned by the liff.init() method is resolved. If you change the URL, INIT_FAILED is returned and the LIFF app can't be opened.

```
Promise
```


```
liff.init()
```


```
INIT_FAILED
```

For example, if you perform redirects using location.replace() after running the liff.init() method, design it so that the screen transitions after the Promise object is resolved.

```
location.replace()
```


```
liff.init()
```


```
Promise
```


```
liff
  .init({
    liffId: "1234567890-AbcdEfgh", // Use own liffId
  })
  .then(() => {
    // Redirect to another page after the returned Promise object has been resolved
    window.location.replace(location.href + "/entry/");
  });
```


```
liff
  .init({
    liffId: "1234567890-AbcdEfgh", // Use own liffId
  })
  .then(() => {
    // Redirect to another page after the returned Promise object has been resolved
    window.location.replace(location.href + "/entry/");
  });
```


#### # Use caution when handling the primary redirect URL

#
The access_token=xxx automatically granted to the primary redirect URL is the user's access token (confidential information). Don't send the primary redirect URL to an external logging tool such as Google Analytics.

```
access_token=xxx
```

Note that in LIFF v2.11.0 or later, credential information is excluded from URLs when the liff.init() method is resolved. Therefore, you can prevent leaking credential information by sending the page view in the then() method as follows. If you want to use logging tools, we recommend that you upgrade your LIFF app to v2.11.0 or later. For more information about the updates in LIFF v2.11.0, see [Release Notes](https://developers.line.biz/en/docs/liff/release-notes/).

```
liff.init()
```


```
then()
```


```
liff
  .init({
    liffId: "1234567890-AbcdEfgh", // Use own liffId
  })
  .then(() => {
    ga("send", "pageview");
  });
```


```
liff
  .init({
    liffId: "1234567890-AbcdEfgh", // Use own liffId
  })
  .then(() => {
    ga("send", "pageview");
  });
```

#
To use LINE Login in an external browser, call the liff.init() method twice as shown below.

```
liff.init()
```

1. Call the liff.init() method after loading the LIFF SDK.
2. Call the liff.login() method. Once the processing of the authentication page and the authorization screen is complete, you will be redirected to the LIFF app (redirectUri). Call the liff.init() method again. If an error occurs during the processing of the liff.init() method, or if the user cancels authorization at the time of login, errorCallback will be executed.
Call the liff.init() method after loading the LIFF SDK.

```
liff.init()
```

Call the liff.login() method. Once the processing of the authentication page and the authorization screen is complete, you will be redirected to the LIFF app (redirectUri). Call the liff.init() method again.

```
liff.login()
```


```
redirectUri
```


```
liff.init()
```

If an error occurs during the processing of the liff.init() method, or if the user cancels authorization at the time of login, errorCallback will be executed.

```
liff.init()
```


```
errorCallback
```

The behavior of LINE Login authorization requests within the LIFF browser isn't guaranteed. Also, when opening LIFF apps from an external browser or LINE's in-app browser, make sure to use the liff.login() method for the login process, not the [authorization requests with LINE Login](https://developers.line.biz/en/docs/line-login/integrate-line-login/).

```
liff.login()
```

#
You can do these things after the LIFF SDK integration and LIFF initialization.
- Getting the environment in which the LIFF app is running
- Performing a login process
- Opening a URL
- Opening the 2D code reader
- Getting the screen type from which the LIFF app was launched
- Getting the user's profile
- Getting the friendship status between the user and the LINE Official Account
- Getting a permanent link for the current page
- Sending messages to the current chat room
- Sending messages to a user's friend (share target picker)
- Closing the LIFF app
Getting the environment in which the LIFF app is running
Performing a login process
Opening a URL
Opening the 2D code reader
Getting the screen type from which the LIFF app was launched
Getting the user's profile
Getting the friendship status between the user and the LINE Official Account
Getting a permanent link for the current page
Sending messages to the current chat room
Sending messages to a user's friend (share target picker)
Closing the LIFF app

#
Call the liff.isInClient() method and the liff.getOS() method to get the environment in which the LIFF app is running.

```
liff.isInClient()
```


```
liff.getOS()
```


```
// print the environment in which the LIFF app is running
console.log(liff.getAppLanguage());
console.log(liff.getVersion());
console.log(liff.isInClient());
console.log(liff.isLoggedIn());
console.log(liff.getOS());
console.log(liff.getLineVersion());
```


```
// print the environment in which the LIFF app is running
console.log(liff.getAppLanguage());
console.log(liff.getVersion());
console.log(liff.isInClient());
console.log(liff.isLoggedIn());
console.log(liff.getOS());
console.log(liff.getLineVersion());
```

For more information, see each method in the LIFF API reference.
- [liff.getAppLanguage()](https://developers.line.biz/en/reference/liff/)
- [liff.getVersion()](https://developers.line.biz/en/reference/liff/)
- [liff.isInClient()](https://developers.line.biz/en/reference/liff/)
- [liff.isLoggedIn()](https://developers.line.biz/en/reference/liff/)
- [liff.getOS()](https://developers.line.biz/en/reference/liff/)
- [liff.getLineVersion()](https://developers.line.biz/en/reference/liff/)
[liff.getAppLanguage()](https://developers.line.biz/en/reference/liff/)
[liff.getVersion()](https://developers.line.biz/en/reference/liff/)
[liff.isInClient()](https://developers.line.biz/en/reference/liff/)
[liff.isLoggedIn()](https://developers.line.biz/en/reference/liff/)
[liff.getOS()](https://developers.line.biz/en/reference/liff/)
[liff.getLineVersion()](https://developers.line.biz/en/reference/liff/)

#
Call the liff.login() method to perform the login process for both the LINE's in-app browser and [external browsers](https://developers.line.biz/en/glossary/).

```
liff.login()
```

You can't use liff.login() in a LIFF browser, as it's automatically executed when liff.init() is executed.

```
liff.login()
```


```
liff.init()
```

If you've specified true in the withLoginOnExternalBrowser property of the [liff.init()](https://developers.line.biz/en/reference/liff/) method, the liff.login() method will be automatically executed when you initialize your LIFF app, even in external browsers. For more information, see liff.init() in the LIFF API reference.

```
true
```


```
withLoginOnExternalBrowser
```


```
liff.init()
```


```
liff.login()
```


```
// login call, only when external browser or LINE's in-app browser is used
if (!liff.isLoggedIn()) {
  liff.login();
}
```


```
// login call, only when external browser or LINE's in-app browser is used
if (!liff.isLoggedIn()) {
  liff.login();
}
```

You can also call the liff.logout() method to log out.

```
liff.logout()
```


```
// logout call only when external browse or LINE's in-app browser is used
if (liff.isLoggedIn()) {
  liff.logout();
  window.location.reload();
}
```


```
// logout call only when external browse or LINE's in-app browser is used
if (liff.isLoggedIn()) {
  liff.logout();
  window.location.reload();
}
```

For more information, see liff.login() and [liff.logout()](https://developers.line.biz/en/reference/liff/) in the LIFF v2 API reference.

#
The liff.openWindow() method opens the specified URL in LINE's in-app browser or an external browser.

```
liff.openWindow()
```

The following code opens https://line.me in an external browser.

```
https://line.me
```


```
// openWindow call
liff.openWindow({
  url: "https://line.me",
  external: true,
});
```


```
// openWindow call
liff.openWindow({
  url: "https://line.me",
  external: true,
});
```

For more information, see [liff.openWindow()](https://developers.line.biz/en/reference/liff/) in the LIFF API reference.

#
Call the liff.scanCodeV2() method to launch a 2D code reader, and get the string read by the user.

```
liff.scanCodeV2()
```


```
// scanCodeV2 call
liff
  .scanCodeV2()
  .then((result) => {
    // e.g. result = { value: 'Hello LIFF app!' }
  })
  .catch((err) => {
    console.log(err);
  });
```


```
// scanCodeV2 call
liff
  .scanCodeV2()
  .then((result) => {
    // e.g. result = { value: 'Hello LIFF app!' }
  })
  .catch((err) => {
    console.log(err);
  });
```

For more information, see [liff.scanCodeV2()](https://developers.line.biz/en/reference/liff/) in the LIFF API reference.
The traditional liff.scanCode() method has been [deprecated](https://developers.line.biz/en/glossary/). We recommend using the liff.scanCodeV2() method for implementing a 2D code reader.

```
liff.scanCode()
```


```
liff.scanCodeV2()
```

The liff.scanCodeV2() method works in the following environments:

```
liff.scanCodeV2()
```

- iOS: iOS 14.3 or later
- Android: All versions
- External browser: Web browsers that support [WebRTC API  (opens new window)](https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API)
[WebRTC API  (opens new window)](https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API)
*1 You can only use web browsers that support [WebRTC API  (opens new window)](https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API).
*2 Only available when the screen size of the LIFF browser is Full. For details, see [Size of the LIFF browser](https://developers.line.biz/en/docs/liff/overview/) in the LIFF documentation.

```
Full
```

When Adding a LIFF app to your channel, turn on Scan QR. The Scan QR setting can be updated from the LIFF tab on the [LINE Developers Console](https://developers.line.biz/console/), even after adding a LIFF app to your channel.

#
Execute the liff.getContext() method to get a value that specifies the screen type (1-on-1 chat, group chat, multi-person chat, or external browser) from which the LIFF app is launched.

```
liff.getContext()
```


```
const context = liff.getContext();
console.log(context);
// {"type": "utou", "userId": "U70e153189a29f1188b045366285346bc", "viewType": "full", "accessTokenHash": "ArIXhlwQMAZyW7SDHm7L2g", "availability": {"shareTargetPicker": {"permission": true, "minVer": "10.3.0"}, "multipleLiffTransition": {"permission": true, "minVer": "10.18.0"}}}
```


```
const context = liff.getContext();
console.log(context);
// {"type": "utou", "userId": "U70e153189a29f1188b045366285346bc", "viewType": "full", "accessTokenHash": "ArIXhlwQMAZyW7SDHm7L2g", "availability": {"shareTargetPicker": {"permission": true, "minVer": "10.3.0"}, "multipleLiffTransition": {"permission": true, "minVer": "10.18.0"}}}
```

For more information, see [liff.getContext()](https://developers.line.biz/en/reference/liff/) in the LIFF v2 API reference.

#
There are two ways to get a user's profile through getting an ID token in the LIFF app. Use the method for your intended purpose.
- Send user data to the server
- Display user data to the LIFF app
Send user data to the server
Display user data to the LIFF app
When adding a LIFF app to your channel, select the openid scope. You can't get the ID tokens if you don't select the scope, or the users don't grant permission. The scope selections can be changed in the LIFF tab of the [LINE Developers Console](https://developers.line.biz/console/) even after adding the LIFF app.

```
openid
```

To get the email addresses of users, select the email scope when adding a LIFF app to your channel. You will get the email address once the user grants permission. The scope selections can be changed in the LIFF tab of the [LINE Developers Console](https://developers.line.biz/console/) even after adding the LIFF app.

```
email
```


#### # Send user data to the server

#
When the LIFF app sends user data to the server, it sends the access token or ID token obtained via this method. For more information, see [Using user data in LIFF apps and servers](https://developers.line.biz/en/docs/liff/using-user-profile/) in the LIFF documentation.
- Execute the [liff.getAccessToken()](https://developers.line.biz/en/reference/liff/) method to get the access token of the current user. When the user closes the LIFF app, the access token will be revoked even if it hasn't expired. // get access token
if (!liff.isLoggedIn() && !liff.isInClient()) {
  window.alert(
    'To get an access token, you need to be logged in. Tap the "login" button below and try again.'
  );
} else {
  const accessToken = liff.getAccessToken();
  console.log(accessToken);
}
For more information, see liff.getAccessToken() in the LIFF API reference.
- Execute the [liff.getIDToken()](https://developers.line.biz/en/reference/liff/) method to get the raw ID token of the current user. liff.init(() => {
  const idToken = liff.getIDToken();
  console.log(idToken); // print raw idToken object
});
For more information, see liff.getIDToken() in the LIFF API reference.
Execute the liff.getAccessToken() method to get the access token of the current user. When the user closes the LIFF app, the access token will be revoked even if it hasn't expired.

```
liff.getAccessToken()
```


```
// get access token
if (!liff.isLoggedIn() && !liff.isInClient()) {
  window.alert(
    'To get an access token, you need to be logged in. Tap the "login" button below and try again.'
  );
} else {
  const accessToken = liff.getAccessToken();
  console.log(accessToken);
}
```


```
// get access token
if (!liff.isLoggedIn() && !liff.isInClient()) {
  window.alert(
    'To get an access token, you need to be logged in. Tap the "login" button below and try again.'
  );
} else {
  const accessToken = liff.getAccessToken();
  console.log(accessToken);
}
```

For more information, see [liff.getAccessToken()](https://developers.line.biz/en/reference/liff/) in the LIFF API reference.
Execute the liff.getIDToken() method to get the raw ID token of the current user.

```
liff.getIDToken()
```


```
liff.init(() => {
  const idToken = liff.getIDToken();
  console.log(idToken); // print raw idToken object
});
```


```
liff.init(() => {
  const idToken = liff.getIDToken();
  console.log(idToken); // print raw idToken object
});
```

For more information, see [liff.getIDToken()](https://developers.line.biz/en/reference/liff/) in the LIFF API reference.

#### # Display user data to the LIFF app

#
Execute the liff.getDecodedIDToken() method to get the profile information and email address of the current user.

```
liff.getDecodedIDToken()
```

Use this API to use the user's display name in the LIFF app.
Don't send the user data obtained by liff.getDecodedIDToken() to the server. Send the ID token obtained with liff.getIDToken() instead.

```
liff.getDecodedIDToken()
```


```
liff.getIDToken()
```


```
liff.init(() => {
  const idToken = liff.getDecodedIDToken();
  console.log(idToken); // print decoded idToken object
});
```


```
liff.init(() => {
  const idToken = liff.getDecodedIDToken();
  console.log(idToken); // print decoded idToken object
});
```

For more information, see [liff.getDecodedIDToken()](https://developers.line.biz/en/reference/liff/) in the LIFF v2 API reference.

#
Gets the friendship status between the user and the LINE Official Account that's linked to the LINE Login channel to which the LIFF app is added.
Learn more on how to [Add a LINE Official Account as a friend when logged in (add friend option)](https://developers.line.biz/en/docs/line-login/link-a-bot/) in the LINE Login documentation.

```
liff.getFriendship().then((data) => {
  if (data.friendFlag) {
    // something you want to do
  }
});
```


```
liff.getFriendship().then((data) => {
  if (data.friendFlag) {
    // something you want to do
  }
});
```

Learn more from [liff.getFriendship()](https://developers.line.biz/en/reference/liff/) in the LIFF v2 API reference.
When adding a LIFF app to your channel, select the profile scope. You can't get the friendship statuses if you don't select the scope, or the users don't grant permission. The scope selections can be changed in the LIFF tab of the [LINE Developers Console](https://developers.line.biz/console/) even after adding the LIFF app.

```
profile
```

#
Execute the liff.permanentLink.createUrlBy() method to get the permanent link of any page in the LIFF app.

```
liff.permanentLink.createUrlBy()
```


```
// For example, if the endpoint URL of the LIFF app is https://example.com/path1?q1=v1 and its LIFF ID is 1234567890-AbcdEfgh
liff.permanentLink
  .createUrlBy("https://example.com/path1?q1=v1")
  .then((permanentLink) => {
    // https://liff.line.me/1234567890-AbcdEfgh
    console.log(permanentLink);
  });

liff.permanentLink
  .createUrlBy("https://example.com/path1/path2?q1=v1&q2=v2")
  .then((permanentLink) => {
    // https://liff.line.me/1234567890-AbcdEfgh/path2?q=2=v2
    console.log(permanentLink);
  });
```


```
// For example, if the endpoint URL of the LIFF app is https://example.com/path1?q1=v1 and its LIFF ID is 1234567890-AbcdEfgh
liff.permanentLink
  .createUrlBy("https://example.com/path1?q1=v1")
  .then((permanentLink) => {
    // https://liff.line.me/1234567890-AbcdEfgh
    console.log(permanentLink);
  });

liff.permanentLink
  .createUrlBy("https://example.com/path1/path2?q1=v1&q2=v2")
  .then((permanentLink) => {
    // https://liff.line.me/1234567890-AbcdEfgh/path2?q=2=v2
    console.log(permanentLink);
  });
```

For more information, see [liff.permanentLink.createUrlBy()](https://developers.line.biz/en/reference/liff/) in the LIFF v2 API reference.

#
The liff.sendMessages() method sends messages on behalf of the user to the chat room where the LIFF app is opened. You can send up to 5 message objects in a single request.

```
liff.sendMessages()
```

This code sends "Hello, World!" as the user's message to the chat room where the LIFF app is displayed.

```
liff
  .sendMessages([
    {
      type: "text",
      text: "Hello, World!",
    },
  ])
  .then(() => {
    console.log("message sent");
  })
  .catch((err) => {
    console.log("error", err);
  });
```


```
liff
  .sendMessages([
    {
      type: "text",
      text: "Hello, World!",
    },
  ])
  .then(() => {
    console.log("message sent");
  })
  .catch((err) => {
    console.log("error", err);
  });
```

For more information, see [liff.sendMessages()](https://developers.line.biz/en/reference/liff/) in the LIFF API reference.

#
Execute the liff.shareTargetPicker() method to display the target picker (screen for selecting a group or friend) and send the message created by the developer to the selected target. This message appears to your group or friends as if you had sent it.

```
liff.shareTargetPicker()
```


#### # Using the share target picker

#
To use the share target picker, developers need to consent to "Agreement Regarding Use of Information" by following the instructions below. This consent is required for each channel.
1. In the [LINE Developers Console](https://developers.line.biz/console/), select the LINE Login channel to add the LIFF app.
2. Click shareTargetPicker on the LIFF tab and "Agreement Regarding Use of Information" will be displayed.
3. Carefully read the content displayed and check I have read and agree to the Agreement Regarding Use of Information, then click Enable.
[LINE Developers Console](https://developers.line.biz/console/)

#### # Sample code of the share target picker

#
The following code displays the target picker and sends "Hello, World!" as the user's message to the selected group or friends. If you want to confirm that the target picker can be used in the environment where the LIFF app is started, execute liff.isApiAvailable() first.

```
liff.isApiAvailable()
```


```
if (liff.isApiAvailable("shareTargetPicker")) {
  liff.shareTargetPicker([
    {
      type: "text",
      text: "Hello, World!",
    },
  ]);
}
```


```
if (liff.isApiAvailable("shareTargetPicker")) {
  liff.shareTargetPicker([
    {
      type: "text",
      text: "Hello, World!",
    },
  ]);
}
```

For more information, see liff.isApiAvailable() and [liff.shareTargetPicker()](https://developers.line.biz/en/reference/liff/) in the LIFF v2 API reference.
When using an external browser, call liff.login(), complete the login process, then call liff.shareTargetPicker().

```
liff.login()
```


```
liff.shareTargetPicker()
```

#
The liff.closeWindow() method closes the opened LIFF app.

```
liff.closeWindow()
```


```
// closeWindow call
if (!liff.isInClient()) {
  window.alert(
    "This button is unavailable as LIFF is currently being opened in an external browser."
  );
} else {
  liff.closeWindow();
}
```


```
// closeWindow call
if (!liff.isInClient()) {
  window.alert(
    "This button is unavailable as LIFF is currently being opened in an external browser."
  );
} else {
  liff.closeWindow();
}
```

For more information, see [liff.closeWindow()](https://developers.line.biz/en/reference/liff/) in the LIFF v2 API reference.
liff.closeWindow() isn't guaranteed to work in an external browser.

```
liff.closeWindow()
```

#
By setting an OGP tag for each page of the LIFF app, for example, you can display any title, description, or thumbnail image when sharing the URL of your LIFF app (https://liff.line.me/{liffId}) in the LINE chat room, and so on.

```
https://liff.line.me/{liffId}
```

These are the OGP tags supported by LIFF. For more information on OGP tags, see [The Open Graph protocol  (opens new window)](https://ogp.me/).

```
<html lang="ja" prefix="og: http://ogp.me/ns#">
<meta property="og:title" content="The title">
<meta property="og:type" content="`website`, `blog`, or `article`">
<meta property="og:description" content="A one to two sentence description">
<meta property="og:url" content="The URL">
<meta property="og:site_name" content="The name that represents the overall site">
<meta property="og:image" content="An image URL">
```


```
<html lang="ja" prefix="og: http://ogp.me/ns#">
<meta property="og:title" content="The title">
<meta property="og:type" content="`website`, `blog`, or `article`">
<meta property="og:description" content="A one to two sentence description">
<meta property="og:url" content="The URL">
<meta property="og:site_name" content="The name that represents the overall site">
<meta property="og:image" content="An image URL">
```

When sharing the URL of the LIFF app in the format of line://app/{liffId} (deprecated), the OGP tag will be ignored.

```
line://app/{liffId}
```

#
When opening an external site that isn't a LIFF app from a LIFF app opened in the LIFF browser, a popup will appear indicating that "This is an external page".
The popup will only appear when opening the external site in the same window. If the external site is opened in a different window, the popup doesn't appear.
When transitioning up to a higher level (e.g. https://example.com/) than the endpoint URL (e.g. https://example.com/path) itself in a LIFF app, the behavior isn't guaranteed.

```
https://example.com/
```


```
https://example.com/path
```

#

After developing the LIFF app, deploy it on any server. Once deployed, do these things:
1. [Add the LIFF app to your channel.](https://developers.line.biz/en/docs/liff/registering-liff-apps/)
2. [Open the LIFF app](https://developers.line.biz/en/docs/liff/opening-liff-app/)
[Add the LIFF app to your channel.](https://developers.line.biz/en/docs/liff/registering-liff-apps/)
[Open the LIFF app](https://developers.line.biz/en/docs/liff/opening-liff-app/)
[Setting the title of the LIFF app](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Integrating the LIFF SDK with the LIFF app](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Specify the CDN path](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Use the npm package](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Initializing the LIFF app](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Important points to consider when initializing the LIFF app](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[To use LINE Login in an external browser](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Calling the LIFF API](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Getting the environment in which the LIFF app is running](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Performing a login process](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Opening a URL](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Opening the 2D code reader](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Getting the screen type from which the LIFF app was launched](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Get user profile](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Getting the friendship status between the user and the LINE Official Account](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Getting the permanent link of any page in the LIFF app](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Sending messages to the current chat room](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Sending messages to a user's friend (share target picker)](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Closing the LIFF app](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Setting the OGP tags](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[When opening an external site that isn't a LIFF app](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
[Next steps](https://developers.line.biz/en/docs/liff/developing-liff-apps/)
- [About LINE Developers site](https://developers.line.biz/en/about/)
-
- [Terms and Policies](https://developers.line.biz/en/terms-and-policies/)
-
- [About trademarks](https://developers.line.biz/en/trademark/)
-
- [LINE API Status](https://api.line-status.info/)
[About LINE Developers site](https://developers.line.biz/en/about/)
[Terms and Policies](https://developers.line.biz/en/terms-and-policies/)
[About trademarks](https://developers.line.biz/en/trademark/)
[LINE API Status](https://api.line-status.info/)
